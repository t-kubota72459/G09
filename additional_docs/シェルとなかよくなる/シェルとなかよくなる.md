# シェルとなかよくなる

### ちょっと便利機能
カーソルキー (↑、↓)　で過去に実行したコマンドをもう一度呼び出せることは説明した。
もう少しシェルの便利機能について紹介する。
#### タブキー（ファイル補完）
おそらくこれがもっともよく使う便利機能だ。

```sh
$ cd t<TAB>     # t だけ打ってタブキー
$ cat K<TAB>    # K だけ打ってタブキー
```

どうだろうか。ファイル名のうしろは自動的に補われた (補完された) はずである。

パスを構成する要素であればどこでも利用できる。

特に２行目に注意してほしい。いま /home の下には `pi` という一つしかフォルダがないので、何も入力しなくても、タブキーのみで補完される。

候補が複数ある場合には補完はそこで一度止まる。`<TAB><TAB>` とタブを２回入力すると候補が出力される。
一つに絞り込めるところまで入力してあげよう。

```sh
$ cd /h<TAB>      # /home になる
$ cd /home/<TAB>  # /home/pi になる
```
これをファイル補完という。タブキーのファイル補完機能についての説明は以上。

---

前回、つぎのようなプログラム zipcode.sh を書いた。

```sh
#!/bin/sh
curl -L https://www.post.japanpost.jp/zipcode/dl/roman/KEN_ALL_ROME.zip -o KEN_ALL_ROME.zip
```

これは curl というコマンドを使って、郵便局のサイト (https::www.post.japanpost.jp) で公開されている郵便番号の一覧のファイルをダウンロードするプログラムである。

**-o <ファイル名>** でダウンロードしてきたファイルの名前を `KEN_ALL_ROME.zip` としている。

これに `chmod` コマンドで実行権をつけた。こうすることで、`./zipcode.sh` だけでプログラムが動くようになる。(ここまでを確認した)

```sh
$ chmod +x zipcode.sh   # 実行権を付与
$ ./zipcode.sh          # ./zipcode.sh を実行
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 1716k  100 1716k    0     0  3724k      0 --:--:-- --:--:-- --:--:-- 3732k
```

実行結果で出力される３行は、データの送受信量や進捗を表示している。

# zip ファイルを解凍する

ZIP ファイルは、**「複数のファイルをまとめて、かつ、サイズが小さくなるよう圧縮した」ファイル**である。**解凍** しないと中身を見ることができない。

ZIP ファイルを解凍するには unzip コマンドを使う。unzip コマンドをインストールしよう。

```sh
$ sudo apt install unzip # unzip コマンドをインストール
```
unzip コマンドで KEN_ALL_ROME.zip を解凍する。

```sh
$ unzip KEN_ALL_ROME.zip
Archive:  KEN_ALL_ROME.zip
  inflating: KEN_ALL_ROME.CSV
```

解凍できたら中身を見てみよう。おっと、日本語が化けてしまうようだ。

```sh
$ cat KEN_ALL_ROME.CSV  # ローマ字部分は読み取れるけど…
```

日本語を表現する流儀（文字コード）にはいくつかの種類がある。読み取り方が合っていないと正しく表示されない。文字コードを変更するには、iconv コマンドを使う。

これで表示されるはずだ。これは、Shift-JIS という文字コードで書かれたファイルを UTF-8 という文字コードになおして `KEN_ALL_ROME.TXT`　というファイル名で保存してね、という意味である。

```sh
$ iconv -f SHIFT-JIS -t UTF-8 KEN_ALL_ROME.CSV　> KEN_ALL_ROME.TXT
```

これで準備が整った。

# 郵便番号を検索する

＜ここまで＞

## ■ 文字コードとは？

**文字コード**とは、「文字」と「コンピュータが扱う数値」とを対応づける**ルール（規格）**のことである。

コンピュータは文字をそのまま扱えないため、**数値（バイナリ）**に変換して記録・処理する。  
たとえば、`A`という文字は内部的に `65` という数値で表される。このような対応関係を定めたものが文字コードである。

---

## ■ 主な文字コードの種類

| 文字コード   | 特徴 |
|--------------|------|
| **ASCII**    | アメリカ発の基本的な文字コード。英数字と記号のみ（0～127）対応。 |
| **Shift_JIS**| 日本語（漢字）に対応した文字コード。Windowsでよく使われた。 |
| **EUC-JP**   | UNIX系OSで使われた日本語対応の文字コード。 |
| **UTF-8**    | 世界中の文字を扱える**Unicode**の一種。Webで広く使われている。 |

---

## ■ Unicodeとは？

- 世界中の文字を一つのルールで表せるようにした**統一文字コード規格**。
- 文字に一意な番号（コードポイント）を割り当てている。
- 実際の保存や通信には**UTF-8**, **UTF-16**, **UTF-32**などの形式で使われる。

---

## ■ なぜ文字コードが大事なの？

- 適切な文字コードを使わないと**文字化け**が起こる。
- データの保存・送信・読み込み時に**文字コードを統一**することが重要。
- たとえば、UTF-8で保存されたファイルをShift_JISで読み込むと、「�」のように表示されることがある。
---

