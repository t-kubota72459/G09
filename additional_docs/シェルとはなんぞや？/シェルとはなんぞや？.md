# シェル

OS や Linux, UNIX, そして、Ubuntu、ディストリビューションといった単語について前回説明した。
その歴史的経緯から UNIX はコマンド (黒い画面)　大好きだってことも。

**注意**　: このドキュメントでは、「コマンド」と「命令」を同じ意味で使っている。
また「フォルダ」と「ディレクトリ」も同じ意味で使っている。違う意味で利用するときは断りをいれる。

## シェルとはなんぞや？

コンピューターにはコマンドを入力するための様々なインターフェースが備わっている。

凝ったグラフィカルユーザーインターフェース、音声インターフェース、さらにはAR/VRまで、あらゆるものが存在する。
これらは 80% のユースケースには適しているが、多くの場合、根本的に機能に制限がある。
存在しないボタンを押したり、プログラムされていない音声コマンドを入力したりすることはできない。
コンピューターが提供するツールを最大限に活用するには、昔ながらのテキストインターフェース、つまりシェルに頼らなければならない。

**シェルというのは、コンピューター (OS) に指示を送るためのテキスト・インターフェースである。**

![alt text](image.png)

ほぼすべてのプラットフォーム (Windows, Mac, Linux) には、なんらかの形でシェルが搭載されており、しかも複数のシェルから好みのものを選択できる。シェルは細部では異なる場合もあるが、その本質はどれもほぼ同じである。つまり、プログラムを実行して、入力を与え、その出力を得る、ということである。

ここでは　Bourne Again SHell (bash) を取り上げる。

これは最も広く使用されているシェルの一つで、その構文は他の多くのシェルと似ている。
シェル プロンプト（コマンドを入力できる場所）を開くには、まずターミナルが必要である。

## シェルの使用

ターミナルを起動すると、次のようなプロンプトが表示されることがある。

```sh
$
```

これはシェルへのメインのテキストインタフェースである。$ マークが入力受付であることを示している。
ここに命令を入力する。

前回説明した通り、命令を最初に書いて、その後ろに (必要であれば) 引数を <スペース> で区切って入力する。
echo は渡された引数を出力するだけなので、スペースを余り意識する必要がないが、下の例のように、スペースを多く打っても、「区切り」として扱われるだけなので、出力結果は "hello world" となる。

```sh
$ echo Hello world  
hello world  
$ echo Helo                          world  
hello world  
```

スペースを含む文字列を渡したいときは "" で括る。

```sh
$ echo "Helo                          world"
Helo                          world
```

### 質問

(1) と (2) の違いを述べよ。

```sh
$ mkdir My Photo              (1)
$ mkdir "My Photo"            (2)
```

## シェルでのディレクトリ移動

さて、シェルのなかでパス (ファイルのたどり方)　は Linux と macOS ではフォルダ名が  `/` で区切られている。
Windows は 区切りに (日本のPCでは円マークだったりするが) `\`  を使用する。

また Linux と macOS はファイルパスの一番てっぺん (トップ) は `/` (ルート, root) でありその下にすべてのディレクトリとファイルが存在する。

一方 Windows ではディスク装置ごとそれぞれにルート (てっぺん) がある。(`C:\` だったり `I:\` する)。

この授業では RasPi を使っているので Linux を使用していると想定する。

`/` で始まるパスは **絶対パス** と呼ばれる。その以外のパスは **相対パス** と呼ばれる。
ファイルの **相対パス** というのは今いる作業ディレクトリからのたどり方を表している。

シェルは黒い画面単位に起動することができるが (たくさんターミナルを立ち上げれば、その数だけシェルが立ち上がる)、それぞれのシェルは、自分のホーム・ディレクトリの **"なか"** にいることになっている。
ユーザーが今いるディレクトリのことを作業ディレクトリといい、これはいつでも変えることができる。

**`pwd` (print working directory)** コマンドを使うと今いるディレクトリを表示させることができる。

```sh
 $ pwd
/home/pi
```

これは、今ユーザーのいる場所はルートディレクトリ (`/`) のなかに、home というディレクトリがあって、
home のなかには pi とディレクトリがあって、あなたはそこに **いますよ** という意味である。

一番てっぺん (ルートディレクトリ) は `/` で表す約束になっている。

以下を実行してみよう。

```sh
$ ls /home/pi
$ ls
```

この２つは全く同じものが表示されるはずである。なにも引数を指定しないとき、ls は作業ディレクトリの内容を表示する。

```sh
$ ls /home
pi
```

これは /home のなかにあるファイル (やフォルダ) の一覧となる。

`ls /` はルートディレクトリの内容を表示する。

**注意**: **`/` は２つの意味を持っていることに注意。ひとつは `/` ルートディレクトリを示す。もう一つは、ファイルやフォルダの区切りを示す。**

```sh
ls /
bin  boot  dev  etc  home  lib  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
```

ここに表示された名前は Linux のシステム用フォルダの名前である。

もしまだ gomi ファイルが残っていたら、このように実行してみよう。

```sh
cat /home/pi/gomi
```

この `/home/pi/gomi` がパス名である。パス名のもつ意味は、ルートからディレクトリをたどってたどり着くまでの道筋 (パス) を表したものだからである。これは Linux (UNIX) の共通ルールである。

絶対パスについて、最後に次のようにやってみよう。
/bin のなかに date コマンド /usr/bin のなかに apt コマンドがあることが見つけられるはずだ。

```sh
ls /bin /usr/bin
```

次のようにすると、前回インストールした gomoku や hangman のファイルがあることがわかる。

```sh
ls /usr/games
```